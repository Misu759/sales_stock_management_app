<div class="container-fluid px-4">
  <h1 class="mt-4 mb-4"><%= t '.title' %></h1>

  <% @ingredients.each do |ingredient| %>
    <% ingredient.decorate.alert_purchase(@list) %>
  <% end %>
  <% if !@list.empty? %>
    <div class="alert alert-danger">
      <h4 class="alert-heading">発注が必要です</h4>
      <% @list.each do |ingredient_name| %>
        <p><%= ingredient_name %>の在庫量を確認してください</p>
      <% end %>
      <hr>
      <p class="mb-0">管理しているデータと実際の在庫量に大きな違いがある場合は，使用量を確認する必要があります</p>
    </div>
  <% end %>

  <div class="row">
    <div class="col-xl-6">
      <div class="card mb-4">
        <div class="card-body">
            Chart.js is a third party plugin that is used to generate the charts in this template. The charts below have been customized - for further customization options, please visit the official
            <div class="text-center">
              <%= link_to "食材情報の登録", new_ingredient_path, class: "btn btn-lg btn-outline-secondary" %>
            </div>
        </div>
      </div>
    </div>
    <div class="col-xl-6">
      <div class="card mb-4">
        <div class="card-body">
            Chart.js is a third party plugin that is used to generate the charts in this template. The charts below have been customized - for further customization options, please visit the official
            <div class="text-center">
              <%= link_to t('.waste_path'), wastes_path, class: "btn btn-lg btn-outline-secondary" %>
            </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-body">
        Chart.js is a third party plugin that is used to generate the charts in this template. The charts below have been customized - for further customization options, please visit the official
        <div class="mt-4 mb-4">
          <%= render 'search_form' %>
        </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
        <!-- <i class="fas fa-table me-1"></i> -->
        食材情報一覧
    </div>
    <div class="card-body">
      <table class="table table-bordered" id="datatablesSimple">
        <thead>
          <tr>
            <th scope="col"><%= Ingredient.human_attribute_name :name %></th>
            <th scope="col"><%= Ingredient.human_attribute_name :stock %></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <% @ingredients.each do |ingredient| %>
            <tr>
              <th scope="row"><%= ingredient.name %></th>
              <td>
                <% if ingredient.stock <= ingredient.threshold.to_i %>
                  <p class="text-danger"><%= ingredient.stock %></p>
                <% else %>
                  <%= ingredient.stock %>
                <% end %>
              </td>
              <td>
                <%= link_to t('defaults.show'), ingredient_path(ingredient), class: "btn btn-sm btn-outline-secondary" %>
                <%= link_to t('defaults.edit'), edit_ingredient_path(ingredient), class: "btn btn-sm btn-outline-success" %>
                <%= link_to t('defaults.delete'), ingredient_path(ingredient), class: "btn btn-sm btn-outline-danger", method: :delete, data: {confirm: "Are you sure?"} %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>